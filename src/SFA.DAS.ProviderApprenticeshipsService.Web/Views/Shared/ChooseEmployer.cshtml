@using SFA.DAS.ProviderApprenticeshipsService.Web.Models
@using SFA.DAS.ProviderApprenticeshipsService.Web.Models.Types
@model SFA.DAS.ProviderApprenticeshipsService.Web.Models.ChooseEmployerViewModel
@{
    switch (Model.EmployerSelectionAction)
    {
        case EmployerSelectionAction.CreateCohort:
            ViewBag.Title = "Create Cohort";
            break;
        case EmployerSelectionAction.CreateReservation:
            ViewBag.Title = "Reserve Funds";
            break;
    }
}

<div class="grid-row">
    <div class="column-two-thirds">

        <h1 class="heading-xlarge">Choose an employer</h1>
        @switch (Model.EmployerSelectionAction)
        {
            case EmployerSelectionAction.CreateCohort:
                <p>Choose an employer you want to create a new cohort on behalf of.</p>
                break;
            case EmployerSelectionAction.CreateReservation:
                <p>Choose an employer you want to reserve funds on behalf of.</p>
                break;
        }
       
        <p>@Model.LegalEntities.Count() result@(Model.LegalEntities.Count() != 1 ? "s" : null) found.</p>
        <table class="table">
            <thead>
                <tr>
                    <th scope="col">Employer</th>
                    <th scope="col">Account name</th>
                    <th scope="col">Agreement ID</th>
                    <th scope="col"><span class="vh">Action</span></th>
                </tr>
            </thead>
            <tbody>
                @foreach (var legalEntity in Model.LegalEntities)
                {
                <tr>
                    <td>@legalEntity.EmployerAccountLegalEntityName</td>
                    <td>@legalEntity.EmployerAccountName</td>
                    <td>@legalEntity.EmployerAccountLegalEntityPublicHashedId</td>
                    <td class="link-right">
                        @switch (Model.EmployerSelectionAction)
                        {
                            case EmployerSelectionAction.CreateCohort:
                                <a href="@Url.Action("ConfirmEmployer", "CreateCohort", new ConfirmEmployerViewModel(legalEntity, Model.EmployerSelectionAction))">Select <span class="vh">@legalEntity.EmployerAccountLegalEntityName</span></a>
                                break;
                            case EmployerSelectionAction.CreateReservation:
                                <a href="@Url.Action("ConfirmEmployer", "Reservation", new ConfirmEmployerViewModel(legalEntity, Model.EmployerSelectionAction))">Select <span class="vh">@legalEntity.EmployerAccountLegalEntityName</span></a>
                                break;
                        }
                    </td>
                </tr>
                }
            </tbody>
        </table>
    </div>
</div>

@section breadcrumb {
<div class="breadcrumbs">
    <a href="@Url.Action("Index", "Account")" aria-label="Back to account home" class="back-link">Back</a>
</div>
}


